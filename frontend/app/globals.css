@import "tailwindcss";

:root {
    --background: #E8E4E1;
    --foreground: #5C5856;
}

[data-theme="dark"] {
    --background: #3A3734;
    --foreground: #D4CFC9;
}

@theme {
    /* Editor colors - Light theme (Morandi) */
    --color-editor-bg: #E8E4E1;
    --color-editor-bg-alt: #D9D5D2;
    --color-editor-panel: #F0EDEA;
    --color-editor-border: #C8C4C1;
    --color-editor-dark: #3A3734;
    --color-editor-hover: #D4CFD0;
    --color-editor-light: #B8B3AE;

    /* Accent colors - Morandi style */
    --color-accent-blue: #7B9BAC;
    --color-accent-cyan: #89A5A8;
    --color-accent-magenta: #A78BA8;
    --color-accent-green: #8B9B88;
    --color-accent-red: #B88B8B;
    --color-accent-orange: #C4A68A;
    --color-accent-yellow: #C4B89E;

    /* Text colors - Light theme */
    --color-text-primary: #6B7D8C;
    --color-text-secondary: #7A8897;
    --color-text-tertiary: #9CA4AB;
    --color-text-muted: #B3B8BC;
    --color-text-fg: #5C5856;
    --color-text-fg-dark: #3A3734;

    /* Dark theme editor colors */
    --color-editor-bg-dark: #3A3734;
    --color-editor-bg-alt-dark: #4A4643;
    --color-editor-panel-dark: #2C2A28;
    --color-editor-border-dark: #565350;
    --color-editor-hover-dark: #524F4C;
    --color-editor-light-dark: #6B6764;

    /* Dark theme text colors */
    --color-text-primary-dark: #A4B4BE;
    --color-text-secondary-dark: #9AA7B0;
    --color-text-tertiary-dark: #7E8B94;
    --color-text-muted-dark: #6B7479;
    --color-text-fg-dark-mode: #D4CFC9;

    /* Heights */
    --height-header: 48px;
    --height-player-controls: 48px;
    --height-timeline: 300px;

    /* Widths */
    --width-resource-panel: 30%;
    --width-properties-panel: 30%;
    --width-track-header: 128px;
}

@theme inline {
    --color-background: var(--background);
    --color-foreground: var(--foreground);
    --font-sans: var(--font-geist-sans);
    --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) {
        --background: #3A3734;
        --foreground: #D4CFC9;
    }
}

html,
body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
}

body {
    background: var(--background);
    color: var(--foreground);
    font-family: Arial, Helvetica, sans-serif;
    transition: background-color 0.3s ease, color 0.3s ease;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    user-select: none;
}

/* 改善按钮和交互元素的响应性 */
button,
[role="button"],
input[type="button"],
input[type="submit"] {
    cursor: pointer;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    outline: none;
}

/* 防止快速连续点击 */
button:disabled {
    cursor: not-allowed;
    opacity: 0.7;
}

/* 优化模态和覆盖层的性能 */
.modal-backdrop,
[data-modal] {
    will-change: opacity, transform;
    transform: translateZ(0);
}

/* 防止文本选择干扰点击 */
.no-select {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
}

/* 优化滚动性能 */
.scroll-container {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
}

/* 防止长按菜单 */
.prevent-context-menu {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* Dark theme overrides */
[data-theme="dark"] {
    --color-editor-bg: var(--color-editor-bg-dark);
    --color-editor-bg-alt: var(--color-editor-bg-alt-dark);
    --color-editor-panel: var(--color-editor-panel-dark);
    --color-editor-border: var(--color-editor-border-dark);
    --color-editor-hover: var(--color-editor-hover-dark);
    --color-editor-light: var(--color-editor-light-dark);
    --color-text-primary: var(--color-text-primary-dark);
    --color-text-secondary: var(--color-text-secondary-dark);
    --color-text-tertiary: var(--color-text-tertiary-dark);
    --color-text-muted: var(--color-text-muted-dark);
    --color-text-fg: var(--color-text-fg-dark-mode);
}

.no-scrollbar::-webkit-scrollbar {
    display: none;
}

.no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

/* 水平滚动条样式 */
::-webkit-scrollbar {
    height: 8px;
}

::-webkit-scrollbar-thumb:horizontal {
    background-color: rgba(92, 88, 86, 0.2);
    border-radius: 4px;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:horizontal {
    background-color: rgba(212, 207, 201, 0.2);
}

::-webkit-scrollbar-thumb:horizontal:hover {
    background-color: rgba(92, 88, 86, 0.3);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:horizontal:hover {
    background-color: rgba(212, 207, 201, 0.3);
}

::-webkit-scrollbar-track {
    background: transparent;
}

/* Timeline 滚动条样式 */
.timeline-scroll-container {
    overflow-y: auto;
    overflow-x: auto;
}

/* 隐藏垂直滚动条 */
.timeline-scroll-container::-webkit-scrollbar:vertical {
    width: 0;
    display: none;
}

/* 平台特定的窗口控制按钮显示 */
.mac-only {
    display: none;
}

.windows-only {
    display: none;
}

/* 根据 data-platform 属性显示对应平台的控件 */
body[data-platform="macos"] .mac-only {
    display: flex;
}

body[data-platform="windows"] .windows-only {
    display: flex;
}

/* 优化动画性能 */
.animate-spin {
    animation: spin 1s linear infinite;
    will-change: transform;
}

@keyframes spin {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

/* 防止重绘和重排优化 */
.optimize-rendering {
    will-change: transform, opacity;
    transform: translateZ(0);
    backface-visibility: hidden;
}

/* 优化过渡动画 */
.transition-all {
    transition-property: all;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
}

/* 防止点击穿透 */
.prevent-click-through {
    pointer-events: auto;
}

/* 禁用状态样式 */
.disabled-state {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
}

/* 加载状态优化 */
.loading-state {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }
}
